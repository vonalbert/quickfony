# This is a template compose configuration file usable for production
# * Do not modify this file * but use it as a starting point to build
# your own production stack.
#
# You can test production configuration running the following command
# docker-compose -f docker-compose.yaml -f docker/production.yaml up
version: '3.4'

services:
    app:
        env_file: .env
        environment:
            DOCKER_BUILD_ENVIRONMENT: prod

    reverse-proxy:
        restart: always
        ports:
            - "80:80"
            - "443:443"

    server:
        restart: always
        labels:
            - "traefik.frontend.rule=Host: ${HOST}, www.${HOST}"

    database:
        restart: always
        env_file: .env
